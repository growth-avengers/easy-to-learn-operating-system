# Chapter 03 프로세스와 스레드

## 01 프로세스의 개요
### 프로세스의 개념 
- 프로그램 : 저장 장치에 저장되어 있는 정적인 상태
- 프로세스 - PCB = 프로그램
- 프로세스 : 실행을 위해 메모리에 올라온 동적인 상태
- 프로그램 + PCB = 프로세스
- 일괄 작업 방식: 한개가 끝나야 다음 것이 가능 
- 시분할 방식: 배분해서 여러가지 동시에 수행(현재 방식)

### 프로세스의 상태
- 생성 상태 
  - 프로그램 + PCB 한 상태. 이제 준비상태로 옮겨져 기다려야한다.
- 준비 상태 
  - 실행을 기다리는 모든 프로세스가 자기 차례를 기다리는 상태이다. 실행될 프로세스를 CPU 스케줄러가 선택한다.
- 실행 상태 
  - 선택된 프로세스가 타임 슬라이스를 얻어 CPU를 사용하는 상태이다. 프로세스 사이의 문맥 교환이 일어난다.
- 대기 상태 
  - 실행 상태에 있는 프로세스가 입출력을 요청하면 입출력이 완료될 때까지 기다리는 상태이다. 입출력이 완료되면 준비 상태로 간다.
- 완료 상태 
  - 프로세스가 종료된 상태이다. 사용하던 모든 데이터가 정리된다. 정상 종료인 exit와 비정상 종료인 abort가 포함
- 보류 상태 
  - 프로세스가 메모리에서 잠시 쫒겨난 상태
  - 보류상태가 되는 경우 
    - 메모리가 꽉 차서 일부 프로세스를 메모리 밖으로 내보낼때 
    - 프로그램 오류가 있을 때 
    - 바이러스 같은 공격을 하는 프로세스라고 판단 될때 
    - 입출력이 계속 지연될 때(아사현상)

## 02 프로세스 제어 블록과 문맥 교환
### 프로세스 제어블록 
프로세스를 실행하는 필요한 중요한 정보를 보관하는 자료구조 

### 문맥 교환
CPU를 차지하던 프로세스가 나가고 새로운 프로세스를 받아 들이는 작업

## 03 프로세스의 연산
### 프로세스의 구조
- 코드 영역 
  - 프로그램의 본문이 기술된 곳(읽기)
- 데이터 영역 
  - 코드가 실행되면서 사용하는 변수나 파일 등의 각종 데이터를 모아놓은 곳(읽기/쓰기)
- 스택 영역
  - 운영체제가 프로세스를 실행하기 위해 부수적으로 필요한 데이터를 모아놓은 곳(숨겨져있음)

### 프로세스의 계층 구조 장점
- 여러작업을 동시에 처리할 수 있게 하고
- 프로세스 재사용이 용이하게 하고
- 자원회수가 쉽다.

### 미아 프로세스
- 회수 되지 않고 낭비된 프로세스 
- c언어의 exit() 또는 return()문은 자식 프로세스가 작업을 끝났음을 부모 프로세스에게 알리는 것으로 미아 프로세스를 미연에 방지한다. 
- os 운영에 효율성을 떨어트린다.


## 04 스레드
### 스레드 정의
- cpu 스케줄러가 cpu에 전달하는 일 하나가 스레드이다.
- 프로세스의 코드에 정의된 절차에 따라 cpu에 작업 요청을 하는 실행 단위 
- 처리 > 프로세스 > 스레드

### 프로세스와 스레드의 차이
프로세스끼리는 약하게 연결되있는 반면 스레드끼리는 강하게 연결되어 있다.
- 멀티 스레드
  - 프로세스 내 작업을 여러 개의 스레드를 분할함으로써 작업의 부담을 줄이는 프로세스 운영기법

- 멀티 태스킹(fork)
  - 운영체제가 cpu작업을 줄 때 시간을 잘게 나누어 배분하는 기법

- 멀티프로세싱 
  - cpu를 여러개 사용하여 여러 개의 스레드를 동시에 처리하는 기법(슈퍼스칼라 기법)

- cpu 멀티 스레드
  - 하나의 cpu에서 여러 스레드를 동시에 처리하는 기법(파이프라인 기법)

### 멀티스레드 장점
- 응답성 향상
- 자원 공유
- 효율성 향상
- 다중 cpu지원

### 멀티스레드 단점
- 멀티 스레드는 자원 할당의 효율화를 불러오지만 시스템에 오류가 생길 경우 프로그램 전체에 오류가 발생

--- 
### 논의 내용
- 멀티스레드란 무엇이고, 장단점은 무엇인가요?
- 프로세스 제어 블록이란 무엇인가요?