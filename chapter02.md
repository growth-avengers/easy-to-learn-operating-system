# Chapter02 컴퓨터의 구조와 성능 향상 

## 01 컴퓨터의 기본 구성

하드웨어 구성
> CPU와 메모리
> - CPU: 명령어 해석 및 실행 
> - 메모리: 작업에 필요한 프로그램과 데이터를 저장하는 장소, 바이트 단위로 분할되어 있음, 분할 공간마다 주소로 구분함

> 입출력장치
>  - 외부의 데이터를 컴퓨터에 입력하는 장치
>  - 컴퓨터에서 처리한 결과를 사용자가 원하는 형태로 출력하는 장치

> 저장장치
> - 저장 용량에 비해 가격이 저렴
> - 전원 온오프와 상관없이 데이터를 반영구적으로 저장

> 메인보드 
> - 다양한 부품을 연결하고 전원을 공급해 주는 커다란 판 
> - 버스: 각 장치를 연결하여 데이터가 지나다니는 통로 

> 폰노이만 구조 
> - cpu, 메모리, 입출력장치, 저장장치가 버스로 연결된 구조
> - 모든 프로그램은 메모리에 올라와야 실행할 수 있다

### 기초 용어 정리 
- 크기 단위 
> - 비트: 데이터의 표시 단위
>   - 바이트 == 8비트 
>   - b, B, KB, MB, GB, TB, PB

- 클록과 헤르츠 
> - 클록: 일정한 박자를 만들어 내는 것 
>   - 일정 간격으로 만들어지는 틱: 펄스(클록 틱)
>   - 클록이 일정 간격으로 펄스를 만들면 거기에 맞추어 컴퓨터 안의 모든 구성 부품들이 작업을 진행함 
>   - 클록이 발생할 때마다 데이터를 저장함
> - 헤르츠: 시간에 따라 변화가 일어날 때 사용하는 단위
>   - 헤르츠 단위를 사용한다는 것은 1초 동안 몇 번의 작업이 이루어져서 몇 번의 펄스가 발생하였는가를 의미 

- 시스템버스와 CPU 버스 
> - 시스템 버스: 메모리와 주변장치를 연결하는 버스, 메인보드의 동작 속도 
>   - FBS, 전면버스 
> - BSB(후면 버스): CPU 내부에 있는 장치를 연결하는 버스 


- 프로그래밍과 언어 
> - 프로그램: 컴퓨터의 알려줄 작업을 하나로 모음
>   - 기계어: 0과 1의 이진수로 이루어짐 
>   - 컴파일:  고급언어를 기계어로 번역하는 과정 
>       - 컴파일러: 소스코드를 번역하여 기계어로 이루어진 실행 파일을 만듬 
>   - 인터프리터: 소스코드를 한 번에 한 문장씩 번역하여 실행함.
>       - 자바스크립트
>       - 위부터 한 줄씩 실행되기 때문에 코드에 잘못된 부분이 있는지 파악하기 어렵고 반복되는 작업을 하나로 합치기 힘듬

-----
### 필수 자료 구조
큐와 스택 
> - 큐: FIFO(First In First Out)
>   - 큐잉: 큐에 데이터를 넣고 빼는 작업 
> - 스택: FILO(First In Last Out)
>   - 한쪽으로만 입출력이 이루어짐

배열과 연결 리스트
> - 배열: 형태가 같은 자료를 나열하여 메모리에 연속으로 저장하는 것 , 배열 크기 선언해야 함. 
>   - 데이터의 삽입과 삭제의 문제점: 관리가 어려움 
>   - => 어느 정도 정해진 메모리나 파일 관리에 사용
> - 연결리스트: 데이터를  포인터로 연결함
>   - 데이터를 중간에 삽입하는 것도 간단함
>   - 삭제할 데이터가 있다면 연결 리스트에서 빼낸 후 메모리를 반환함
>   - => 데이터의 삽입과 삭제가 빈번한 테이블에서 사용, 큐를 구현할 때 

------
## 02 CPU와 메모리 
CPU의 구성과 동작 
> CPU
>   - 산순논리 연산장치: 데이터 연산, 산술 연산, 논리 연산 수행 
>   - 제어장치: 작업을 지시하는 부분 
>   - 레지스터로 구성: 작업에 필요한 데이터를 CPU 내부에 보관하는 곳 
>       - 계산을 하기 위해 가져온 데이터를 저장
>       - 계산의 중간 값을 임시로 보관 
>       - 작업을 진행하기 위해 필요한 정보를 보관하는데 사용 

>CPU의 명령어 처리 과정 
>   - 유사코드: 특정 프로그래밍 언어의 문법을 따르지 않지만, 프로그래밍 언어와 비슷하게 만들어진 코드를 말함 

> 레지스터의 종류 
> - CPU는 필요한 데이터를 메모리에서 가져와 레지스터에 저장, 산술논리 연산장치를 이용하여 연산, 그 결과를 다시 레지스터에 저장했다가 메모리로 옮김
>   - 데이터 레지스터(DR): 메모리에서 가져온 데이터를 임시로 보관
>       - 일반 레지스터, 범용 레지스터
>   - 주소 레지스터(AR): 데이터 또는 명령어가 저장된 메모리의 주소
>   - 특수 레지스터: 사용자가 임의로 변경할 수 없기 때문에 사용자 불가시 레지스터
>       - 프로그램 카운터: 다음에 실행할 명령어의 주소를 기억하고 있다가 제어장치에 알려줌
>           - 다음에 실행할 명령어의 주소를 가리킴  -> 명령어 포인터 
>       - 명령어 레지스터: 현재 실행 중인 명령어를 저장함 
>           - 제어장치는 명령어 레지스터에 있는 명령을 해석한 후 외부 자치에 적절한 제어 신호를 보냄 
>       - 메모리 주소 레지스터(MAR): 메모리에서 데이터 가져오거나 보낼 때 
>       - 메모리 버퍼 레지스터(MBR): 데이터를 임시로 저장함 
>           - 항상 메모리 주소 레지스터와 함께 동작함 
>   - 상태 레지스터: 산술논리 연산장치와 연결, 연산 결과를 저장함 
>       - 플래그 레지스터, 상태 레지스터, 컨디션 레지스터

> 버스 
> - 데이터를 주고 받을 때 
> - 제어 신호, 메모리 주소, 데이터 오고감 
> - 제어 버스: 제어 신호가 오고감 
>   - 다음에 어떤 작업을 할지 지시하는 제어 신호가 오고감 
>   - CPU의 제어장치와 연결되어 잇음 
>   - 메모리 오류, 데이터 도착 신호 모두 제어버스를 통해 CPU로 전달 
>   - 양방향 통신 
> - 주소 버스: 주소 전송
>   - 주소 버스를 통해 CPU로 전달되는 정보는 없음 
> - 데이터 버스 
>   - 메모리 버퍼 레지스터와 연결되어 있음, 양방향 

> CPU비트 
> - 버스의 대역폭: 한 번에 전달할 수 있는 데이터의 최대 크기 
> - 버스의 대역폭, 레지스터의 크기, 메모리에 한 번에 저장할 수 있는 데이터의 크기는 항상 같음. 
> - 워드: CPU가 한 번에 처리할 수 있는 데이터의 최대 크기 

-------------
메모리의 종류와 부팅
> 메모리: 램, 롬
> - 램: 무작위로 데이터를 읽어도 저장된 위치와 상관없이 같은 속도로 데이터를 읽을 수 있다는 의미 
>   - 휘발성 메모리
>       - 동적램(DRAM): 시간이 지나면 데이터가 사라지기 때문에 재생이 필요함
>           - 메인 메모리
>       - 정적램(SRAM): 전력이 공급되는 동안에는 데이터를 보관할 수 있어 재생할 필요 없음 
>           - 가격이 비쌈, 속도가 빠름 
>           - 캐시(고속 메모리)
>       - SDRAM: 클록 틱이 발생할 때마다 데이터를 저장하는 동기 DRAM
>   - 비휘발성 메모리 
>       - 플래시 메모리: 디지털카메라, MP3플레이어, USB 드라이버와 같은 전력 없이 데이터 보관 
>       - SSD: 빠른 데이터 접근 속도, 저전력, 높은 내구성 
> - 롬: 전력이 끊겨도 데이터를 보관할 수 있음 
>     - 데이터를 한 번 저장하면 바꿀 수 없음  -> 바이오스 저장 
>     - 마스크롬, PROM, EPROM

메모리보호
> - 사용자 영역의 작업이 운영체제 영역으로 침범하지 못하도록 막는 것 
> - 바이러스: 운영체제 영역이나 다른 프로그램 영역으로 침범하려는 악성 소프트웨어 
> - 운영체제: 프로세스가 CPU를 차지하여 작업이 진행되는 동안 운영체제 작업 잠시 중단됨 
>   - 메모리를 보호하려면 하드웨어의 도움이 필요함 

부팅 
> - 컴퓨터를 켰을 때 운영체제를 메모리에 올리는 과정 
> - 전원 on -> 바이오스 실행 -> 바이오스: 마스터 부트 레코드에 저장된 프로그램 가져와서 메모리에서 실행 
> - 마스터 부트 레코드: 부트스트랩(하드디스크의 첫 번째 섹터를 가리키며 운영체제를 실행하기 위한 코드) 저장 되어 잇음. 
>   - 부트스트랩: 하드디스크에 저장된 운영체제를 메모리로 가져와 실행하는 역할을 하는 작은 프로그램 


##  03컴퓨터 성능 향상 기술 

버퍼 
> - 버퍼: 두 장치 사이의 속도 차이를 완화하는 역할 
>   - 일정량의 데이터를 모아서 옮겨 속도 차이를 완화하는 장치 

스풀
> - CPU와 입출력장치가 독립적으로 동작하도록 고안된 소프트웨엉적인 버퍼
>   - 프로그램간의 배타적 
>> 하드웨어 안전제거: 버퍼가 저장장치에 반영되지 않은 문제를 해결할 수 있음 버퍼에 있는 아직 옮겨지지 않은 데이터를 저장장치를 보내고 전원을 차단하여 안전하게 제거할 수 있도록 준비해줌, 유닉스 - flush

캐시 
> - 메모리의 데이터를 미리 가져와 저장해 두는 임시 장소 
> - CPU와 메모리의 속도 차이 완화해줌 
> - 캐시 히트: 캐시에서 원하는 데이터를 찾았을 때 바로 사용 
> - 캐시 적중률: 캐시 히트가 되는 비율, 약 90프로 
>   - 캐시 적중률 높이기
>       - 캐시 크기 늘리기 
>       - 데이터를 가져옴 
> - 캐시 데이터 변경되면 반영해야 할 문제가 있음 
>   - 즉시 쓰기: 캐시에 있는 데이터가 변경되면 즉시 메모리에 반영하는 방식
>       - 메모리와의 빈번한 데이터 전송으로 성능이 느려짐
>       - 메모리의 최신값이 항상 유지되기 때문에 데이터 잃어버리지 않음 
>   - 지연쓰기: 변경된 내용을 모아서 주기적으로 반영함 
>       - 메모리와 캐시된 데이터 사이의 불일치가 발생할 수 잇음 
> - 레벨별 캐시
>   - 1레벨 캐시: CPU 레지스터에 직접 연결 
>       - 명령어 캐시: 명령어 레지스터와 연결
>       - 데이터 캐시: 데이터 레지스터와 연결 
>   - 2레벨 캐시: 메모리와 직접 연결 
>       - 일반캐시
> - 웹 브라우저 캐시: 앞으로 다시 방문할 것을 예상하여 지우지 않은 데이터 
>   - 재방문시 속도를 높이는 역할 

저장장치의 계층 구조 
> - 속도가 빠르고 값이 비싸 저장장치를 CPU 가까운 쪽에 두기 
> - CPU와 가까운 쪽에 레지스터나 캐시를 배치 -> CPU가 작업을 빨리 진행할 수 있게 함.
> - 중복되는 데이터의 일관성을 유지하는 것이 문제 
> - 버퍼를 사용하는 하드디스크 같은 저장장치에서도 데이터의 일관성이 깨질 수 있음 
> - 분산된 데이터베이스에 같은 데이터가 저장된 경우, CPU를 여러 개 사용하는 병력 컴퓨터의 분산된 메모리 등에서도 발생함 

인터럽트
> - 폴링: CPU가 직접 입출력장치에서 데이터를 가져오거나 내보냄 
>   - CPU가 입출력장치의 상태를 주기적으로 검사하여 일정한 조건을 만족할 때 데이터를 처리함 
>   - 모든 입출력까지 관여해야 하므로 작업 효율이 떨어짐 
> - 데이터의 입출력이 이루어져도 CPU가 다른 작업을 할 수 있음. 

인터럽트 동작 과정 
> - 인터럽트: 입출력 관리자가 CPU에 보내는 완료 신호
>   - 하던 작업을 중단하고 처리해야 하는 신호 
> - 인터럽트 벡터: 여러개의 인터럽트를 하나의 배열로 만듬 

직접 메모리 접근
> - 직접 메모리 접근: 입출력 관리자에게는 CPU의 허락 없이 메모리에 접근할 수 있는 권한이 필요함. 

메모리 맵 입출력
> - 메모리의 일정 공간을 입출력에 할당하는 기법
>   - CPU가 사용하는 메모리 공간과 직접 메모리 접근을 통해 들어오고 나가는 데이터를 위한 공간을 분리하는 것 

사이클 훔치기 
> - CPU의 작업 속도보다 입출력장치의 속도가 느리기 때문에 CPU입장에서는 직접 메모리 접근이 사이클을 훔쳐 간 것이 됨. 

--------

## 멀티 프로세싱 
멀티코어 시스템 
> - 프로세서를 여러 개 설치하여 사용하는 시스템 
> - 프로세서마다 레지스터와 캐시를 가짐
> - 모든  프로세서가 시스템 버스를 통해 메인메모리를 공유함
> - 많은 작업을 동시에 실행시킬 수 있다는 점 
> - 멀티코어 시스템: 하나의 칩에 CPU의 핵심이 되는 코어를 여러 개 만들어 여러 작업을 동시에 처리할 수 있음 

CPU 멀티스레드 
> - 병렬처리: 하나의 코어에서 여러 개의 명령어를 동시에 처리하는 것 
> - 스레드: CPU가 처리할 수 있는 작업의 단위 
>   - 멀티 스레드: 여러 개의 스레드를 동시에 처리하는 방법 
> - 하이퍼 스레드: 코어가 마치 2개 있는 것처럼 보임 

