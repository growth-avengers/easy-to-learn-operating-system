# ch08. 가상메모리의 기초

## 8.1 가상메모리의 개요
- 가상 메모리 기법으로 인해 물리 메모리에 구애받지 않고 메모리를 사용 가능함
- 가상메모리의 크기와 주소
  - 어느 위치에 있던 0번부터 시작
  - 이론적으로 무한대 -> 실제로는 컴퓨터 시스템이 가진 메모리 크기 최대 크기로 한정
- DAT(Dynamic Address Translation. 동적 주소 변환) : 메모리 관리자가 물리메모리와 스왑영역을 합쳐서 프로세스가 사용하는 가상 주소를 실제 메모리 물리 주소로 변환하는 작업

매핑테이블
- 물리주소나 스왑영역에 존재
- 물리메모리가 세그먼테이션으로 분할된 경우 뿐 아니라 페이징으로 분할된 경우에도 같은 방식으로 적용됨
  - 페이지 매핑 테이블 : 페이징 기법에서 사용하는 매핑 테이블
  - 세그먼테이션 매핑 테이블 : 세그먼테이션 기법에서 사용하는 매핑 테이블

지역성 : 기억장치에 접근한느 패턴이 특정 영역에 집중되는 성질
- 공간의 지역성 : 현재 위치에서 가까운 데이터에 접근할 확률이 먼 거리에 있는 데이터에 접근할 확률보다 높다
- 시간의 지역성 : 현재를 기준으로 가까운 시간에 있는 데이터가 먼 시간에 접근한 데이터보다 사용할 확률이 높다
- 순차적 지역성 : 작업이 순서대로 진행되는 것

지역성 이론이 사용되는 예 : 캐시
- 시간적/지역적으로 가까이 있는 데이터를 가져와 캐시 적중률을 높일 수 있음
- 페이지 교체 알고리즘 : 새로운 페이지를 받을 수 있는 상황에서 물리 메모리 페이지 중 하나를 골라 내보낼 때 사용. 사용할 가능성이 적은 페이지를 찾아내야 함

## 8.2 페이징 기법
- 물리 주소 공간을 같은 크기로 나눠 사용
- 프레임 : 물리 메모리의 각 영역
- 페이지 크기 = 프레임 크기
- 페이지 테이블은 하나의 컬럼으로 구성됨 -> 페이지와 연결되는 프레임 번호를 가짐. 메모리에 없으면 invalid로 표시됨

### 페이징 기법의 주소 변환
read
1. 가상주소가 어느 페이지에 있는지 찾는다
2. 페이지 테이블의 해당 페이지로 가서 해당 페이지가 어느 프레임에 있는지 찾는다
3. 최종적으로 물리 메모리 프레임 위치에 접근한다

write
1. 가상 주소가 어느 페이지에 있는지 찾는다
2. 페이지 테이블의 해당 페이지로 가서 해당 페이지가 어느 프레임에 있는지 찾는다
3. 프로세스가 저장하려는 값을 프레임 위치에 저장한다


### 정형화된 주소 변환
- 페이징 기법에서는 가상 주소를 VA=<P, D>로 표현함
  - VA : 가상주소 Virtual Address
  - P : page
  - D : distance. 페이지의 처음 위치부터 해당 주소까지의 거리

페이징 기법의 주소 변환
- 가상주소 VA=<P, D> 를 물리주소 PA=<F, D> 로 변환하는 것
  - PA: 물리메모리 주소
  - F : frame
  - D : distance. 프레임부터 해당 주소까지의 거리

페이지 테이블 엔트리(PTE. Page Table Entry)
- 페이지 테이블은 페이지 번호와 프레임 번호로 구성된 페이지 테이블 엔트리의 집합

### 페이지 테이블 관리
- 메모리 공유
- 쓰기 지점 복사
- 변환 지점 버퍼
- 역 페이지 테이블
- 다단계 페이지 테이블

## 8.3 세그먼테이션 기법
가변 분할 방식을 이용한 가상 메모리 기법. 물리 메모리를 프로세스 크기에 따라 가변벅으로 나눠 사용

세그멘테이션 테이블
- 세그먼트 크기를 나타내는 limit과 물리 메모리 시작 주소 나타내는 address
- 물리 메모리가 부족할 때 스왑 영역 사용
- 장점 : 메모리를 프로세스 단위로 관리하기 때문에 작고 단순
- 단점 : 외부 단편화

## 8.4 캐시 매핑 기법
- 캐시 직접 매핑
- 캐시 연관 매핑
- 캐시 집합 - 연관 매핑

## 질문
- 지역성 이론이 무엇인지 설명하고 사용되는 예시를 들어봅시다
- 캐시 매핑은 어떤 개념인가요? 페이징 기법, 세그멘테이션 기법 등의 메모리 관리 기법과 어떤 점이 다르고, 왜 사용되나요?